<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Swap in Viper - Showcasing Verification</title>	
	<meta name="author" content="Malte Schwerhoff">
	

  <meta name="description" content="Two Viper encodings of a method that swaps the values of two fields x.f and y.f. field f: Int method swap1(x: Ref, y: Ref) requires acc(x.f) &amp;&amp; (x != y ==&gt; acc(y.f)) ensures acc(x.f) &amp;&amp; (x != y ==&gt; acc(y.f)) ensures x.f == old(y â€¦">



	<link rel="stylesheet" href="https://mschwerhoff.github.io/showcasingverification/theme/css/main.css" type="text/css" />
		


</head>
	
<body>
	
	<div class="container">
	
	<header role="banner">
		<div class="feeds">
		</div>
		<div class="home">
			<a href="https://mschwerhoff.github.io/showcasingverification">Showcasing Verification</a>
		</div>
		</header>
	
	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">
		<h1>Swap in Viper</h1>
		    <p class="tags">
          <a href="https://mschwerhoff.github.io/showcasingverification/tag/swap.html">#swap</a>
,           <a href="https://mschwerhoff.github.io/showcasingverification/pages/viper.html">#Viper</a>
,           <a href="https://mschwerhoff.github.io/showcasingverification/tag/permissions.html">#Permissions</a>
    </p>

		<p>Two Viper encodings of a method that swaps the values of two fields <code>x.f</code> and <code>y.f</code>.</p>
<div class="highlight"><pre><span></span>field f: Int

method swap1(x: Ref, y: Ref)
  requires acc(x.f) &amp;&amp; (x != y ==&gt; acc(y.f))
  ensures  acc(x.f) &amp;&amp; (x != y ==&gt; acc(y.f))
  ensures  x.f == old(y.f)
  ensures  y.f == old(x.f)
{
  var tmp: Int := x.f
  x.f := y.f
  y.f := tmp
}

method swap2(x: Ref, y: Ref)
  requires forall r: Ref :: r in Set(x, y) ==&gt; acc(r.f)
  ensures  forall r: Ref :: r in Set(x, y) ==&gt; acc(r.f)
  ensures  x.f == old(y.f)
  ensures  y.f == old(x.f)
{
  var tmp: Int := x.f
  x.f := y.f
  y.f := tmp
}
</pre></div>


<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula
eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient
montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque
eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo,
fringilla vel, aliquet nec, vulputate eget, arcu.</p>	
	</article>

<!--
    <p>
	<a href="https://twitter.com/share" class="twitter-share-button" data-via="" data-lang="en" data-size="large" data-related="">Tweet</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	</p>
-->


		  </div>	
		  
		  <div class="sidebar">
		    <div class="sidebar-container" >


  	          <nav>
	            <h2>Pages</h2>
	            <ul>
	                <li >
										<a href="https://mschwerhoff.github.io/showcasingverification/pages/verifythis2016.html">VerifyThis@ETAPS'16</a>
									</li>
	                <li >
										<a href="https://mschwerhoff.github.io/showcasingverification/pages/viper.html">Viper</a>
									</li>
	            </ul>
	          </nav>


	        </div>
		  </div>

	  </div>

      <footer>
<!--				
		<p role="contentinfo">
		  Malte Schwerhoff - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-sober">pelican-sober</a>.
    	</p>
-->
	  </footer>	

	</div>
	

</body>
</html>